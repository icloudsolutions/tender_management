<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="1">

        <!-- Tender Created Notification -->
        <record id="email_template_tender_created" model="mail.template">
            <field name="name">Tender: Created</field>
            <field name="model_id" ref="model_ics_tender"/>
            <field name="subject">New Tender Created: ${object.name}</field>
            <field name="email_from">${(object.company_id.email or user.email_formatted) | safe}</field>
            <field name="email_to">${object.user_id.email | safe}</field>
            <field name="body_html" type="html">
                <div style="font-family: Arial, sans-serif; padding: 20px; background-color: #f5f5f5;">
                    <div style="background-color: white; padding: 30px; border-radius: 10px; max-width: 600px; margin: 0 auto;">
                        <h2 style="color: #667eea; margin-top: 0;">New Tender Created</h2>
                        <p>Dear ${object.user_id.name},</p>
                        <p>A new tender has been created and assigned to you:</p>

                        <div style="background-color: #f8f9fa; padding: 20px; border-radius: 5px; margin: 20px 0;">
                            <h3 style="margin-top: 0; color: #333;">${object.tender_title}</h3>
                            <table style="width: 100%;">
                                <tr>
                                    <td style="padding: 5px 0;"><strong>Tender Number:</strong></td>
                                    <td style="padding: 5px 0;">${object.tender_number}</td>
                                </tr>
                                <tr>
                                    <td style="padding: 5px 0;"><strong>Customer:</strong></td>
                                    <td style="padding: 5px 0;">${object.partner_id.name}</td>
                                </tr>
                                <tr>
                                    <td style="padding: 5px 0;"><strong>Category:</strong></td>
                                    <td style="padding: 5px 0;">${dict(object._fields['tender_category'].selection).get(object.tender_category)}</td>
                                </tr>
                                <tr>
                                    <td style="padding: 5px 0;"><strong>Submission Deadline:</strong></td>
                                    <td style="padding: 5px 0; color: #dc3545; font-weight: bold;">${format_datetime(object.submission_deadline, dt_format='MMM dd, yyyy HH:mm')}</td>
                                </tr>
                                <tr>
                                    <td style="padding: 5px 0;"><strong>Days Remaining:</strong></td>
                                    <td style="padding: 5px 0;">${object.days_to_deadline} days</td>
                                </tr>
                            </table>
                        </div>

                        <p style="margin-top: 30px;">
                            <a href="${object.get_base_url()}/web#id=${object.id}&amp;model=ics.tender&amp;view_type=form"
                               style="background-color: #667eea; color: white; padding: 12px 30px; text-decoration: none; border-radius: 5px; display: inline-block;">
                                View Tender
                            </a>
                        </p>

                        <p style="color: #666; font-size: 12px; margin-top: 30px; border-top: 1px solid #ddd; padding-top: 20px;">
                            This is an automated notification from ${object.company_id.name}
                        </p>
                    </div>
                </div>
            </field>
        </record>

        <!-- Urgent Deadline Reminder -->
        <record id="email_template_tender_urgent_deadline" model="mail.template">
            <field name="name">Tender: Urgent Deadline</field>
            <field name="model_id" ref="model_ics_tender"/>
            <field name="subject">‚ö†Ô∏è URGENT: Tender Deadline Approaching - ${object.name}</field>
            <field name="email_from">${(object.company_id.email or user.email_formatted) | safe}</field>
            <field name="email_to">${object.user_id.email | safe}</field>
            <field name="body_html" type="html">
                <div style="font-family: Arial, sans-serif; padding: 20px; background-color: #f5f5f5;">
                    <div style="background-color: white; padding: 30px; border-radius: 10px; max-width: 600px; margin: 0 auto; border-top: 5px solid #dc3545;">
                        <h2 style="color: #dc3545; margin-top: 0;">‚ö†Ô∏è URGENT: Tender Deadline Approaching</h2>
                        <p>Dear ${object.user_id.name},</p>
                        <p style="font-size: 16px; color: #dc3545; font-weight: bold;">
                            This tender has only ${object.days_to_deadline} days remaining until the submission deadline!
                        </p>

                        <div style="background-color: #fff3cd; padding: 20px; border-radius: 5px; margin: 20px 0; border-left: 5px solid #ffc107;">
                            <h3 style="margin-top: 0; color: #333;">${object.tender_title}</h3>
                            <table style="width: 100%;">
                                <tr>
                                    <td style="padding: 5px 0;"><strong>Tender Number:</strong></td>
                                    <td style="padding: 5px 0;">${object.tender_number}</td>
                                </tr>
                                <tr>
                                    <td style="padding: 5px 0;"><strong>Current Status:</strong></td>
                                    <td style="padding: 5px 0;">${dict(object._fields['state'].selection).get(object.state)}</td>
                                </tr>
                                <tr>
                                    <td style="padding: 5px 0;"><strong>Deadline:</strong></td>
                                    <td style="padding: 5px 0; color: #dc3545; font-weight: bold; font-size: 16px;">
                                        ${format_datetime(object.submission_deadline, dt_format='MMM dd, yyyy HH:mm')}
                                    </td>
                                </tr>
                            </table>
                        </div>

                        <p style="background-color: #f8d7da; padding: 15px; border-radius: 5px; color: #721c24;">
                            <strong>Action Required:</strong> Please review and complete all pending tasks for this tender immediately.
                        </p>

                        <p style="margin-top: 30px;">
                            <a href="${object.get_base_url()}/web#id=${object.id}&amp;model=ics.tender&amp;view_type=form"
                               style="background-color: #dc3545; color: white; padding: 12px 30px; text-decoration: none; border-radius: 5px; display: inline-block; font-weight: bold;">
                                Review Tender Now
                            </a>
                        </p>

                        <p style="color: #666; font-size: 12px; margin-top: 30px; border-top: 1px solid #ddd; padding-top: 20px;">
                            This is an automated notification from ${object.company_id.name}
                        </p>
                    </div>
                </div>
            </field>
        </record>

        <!-- Tender Won Notification -->
        <record id="email_template_tender_won" model="mail.template">
            <field name="name">Tender: Won</field>
            <field name="model_id" ref="model_ics_tender"/>
            <field name="subject">üéâ Congratulations! Tender Won - ${object.name}</field>
            <field name="email_from">${(object.company_id.email or user.email_formatted) | safe}</field>
            <field name="email_to">${object.user_id.email | safe}</field>
            <field name="body_html" type="html">
                <div style="font-family: Arial, sans-serif; padding: 20px; background-color: #f5f5f5;">
                    <div style="background-color: white; padding: 30px; border-radius: 10px; max-width: 600px; margin: 0 auto; border-top: 5px solid #28a745;">
                        <h2 style="color: #28a745; margin-top: 0;">üéâ Congratulations! Tender Won!</h2>
                        <p>Dear ${object.user_id.name},</p>
                        <p style="font-size: 18px; color: #28a745; font-weight: bold;">
                            Great news! We won the tender!
                        </p>

                        <div style="background-color: #d4edda; padding: 20px; border-radius: 5px; margin: 20px 0; border-left: 5px solid #28a745;">
                            <h3 style="margin-top: 0; color: #333;">${object.tender_title}</h3>
                            <table style="width: 100%;">
                                <tr>
                                    <td style="padding: 5px 0;"><strong>Tender Number:</strong></td>
                                    <td style="padding: 5px 0;">${object.tender_number}</td>
                                </tr>
                                <tr>
                                    <td style="padding: 5px 0;"><strong>Customer:</strong></td>
                                    <td style="padding: 5px 0;">${object.partner_id.name}</td>
                                </tr>
                                <tr>
                                    <td style="padding: 5px 0;"><strong>Quotation Amount:</strong></td>
                                    <td style="padding: 5px 0; font-size: 18px; color: #28a745; font-weight: bold;">
                                        ${'{:,.2f}'.format(object.total_quotation_amount)} ${object.currency_id.symbol}
                                    </td>
                                </tr>
                                % if object.winning_reason:
                                <tr>
                                    <td colspan="2" style="padding: 15px 0;">
                                        <strong>Winning Reason:</strong><br/>
                                        ${object.winning_reason}
                                    </td>
                                </tr>
                                % endif
                            </table>
                        </div>

                        <p style="background-color: #cfe2ff; padding: 15px; border-radius: 5px; color: #084298;">
                            <strong>Next Steps:</strong> You can now create a project for this tender to start execution.
                        </p>

                        <p style="margin-top: 30px;">
                            <a href="${object.get_base_url()}/web#id=${object.id}&amp;model=ics.tender&amp;view_type=form"
                               style="background-color: #28a745; color: white; padding: 12px 30px; text-decoration: none; border-radius: 5px; display: inline-block; font-weight: bold;">
                                View Tender & Create Project
                            </a>
                        </p>

                        <p style="color: #666; font-size: 12px; margin-top: 30px; border-top: 1px solid #ddd; padding-top: 20px;">
                            This is an automated notification from ${object.company_id.name}
                        </p>
                    </div>
                </div>
            </field>
        </record>

        <!-- Vendor RFQ Notification -->
        <record id="email_template_vendor_rfq" model="mail.template">
            <field name="name">Vendor: RFQ Request</field>
            <field name="model_id" ref="purchase.model_purchase_requisition"/>
            <field name="subject">RFQ Request - ${object.name}</field>
            <field name="email_from">${(object.company_id.email or user.email_formatted) | safe}</field>
            <field name="body_html" type="html">
                <div style="font-family: Arial, sans-serif; padding: 20px; background-color: #f5f5f5;">
                    <div style="background-color: white; padding: 30px; border-radius: 10px; max-width: 600px; margin: 0 auto;">
                        <h2 style="color: #667eea; margin-top: 0;">Request for Quotation</h2>
                        <p>Dear Vendor,</p>
                        <p>You are invited to submit a quotation for the following tender:</p>

                        <div style="background-color: #f8f9fa; padding: 20px; border-radius: 5px; margin: 20px 0;">
                            <h3 style="margin-top: 0; color: #333;">${object.name}</h3>
                            % if object.tender_id:
                            <p><strong>Related Tender:</strong> ${object.tender_id.tender_title}</p>
                            % endif
                            <table style="width: 100%;">
                                <tr>
                                    <td style="padding: 5px 0;"><strong>Ordering Date:</strong></td>
                                    <td style="padding: 5px 0;">${format_date(object.ordering_date)}</td>
                                </tr>
                                % if object.schedule_date:
                                <tr>
                                    <td style="padding: 5px 0;"><strong>Delivery Date:</strong></td>
                                    <td style="padding: 5px 0;">${format_date(object.schedule_date)}</td>
                                </tr>
                                % endif
                            </table>
                        </div>

                        <h4 style="color: #333;">Products Required:</h4>
                        <table style="width: 100%; border-collapse: collapse;">
                            <thead>
                                <tr style="background-color: #667eea; color: white;">
                                    <th style="padding: 10px; text-align: left;">Product</th>
                                    <th style="padding: 10px; text-align: right;">Quantity</th>
                                </tr>
                            </thead>
                            <tbody>
                                % for line in object.line_ids:
                                <tr style="border-bottom: 1px solid #ddd;">
                                    <td style="padding: 10px;">${line.product_id.name}</td>
                                    <td style="padding: 10px; text-align: right;">${line.product_qty} ${line.product_uom_id.name}</td>
                                </tr>
                                % endfor
                            </tbody>
                        </table>

                        <p style="margin-top: 30px; background-color: #fff3cd; padding: 15px; border-radius: 5px; color: #856404;">
                            <strong>Important:</strong> Please submit your quotation as soon as possible.
                        </p>

                        <p style="color: #666; font-size: 12px; margin-top: 30px; border-top: 1px solid #ddd; padding-top: 20px;">
                            This is an automated notification from ${object.company_id.name}
                        </p>
                    </div>
                </div>
            </field>
        </record>

    </data>
</odoo>
