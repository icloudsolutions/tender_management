<odoo>
    <record id="res_config_settings_view_form_etimad" model="ir.ui.view">
        <field name="name">res.config.settings.etimad.form</field>
        <field name="model">res.config.settings</field>
        <field name="priority">90</field>
        <field name="inherit_id" ref="base.res_config_settings_view_form"/>
        <field name="arch" type="xml">
            <xpath expr="//form" position="inside">
                <app string="Etimad Tenders" name="ics_etimad_tenders_crm" groups="base.group_system">
                    
                    <!-- Scraping & Sync Settings -->
                    <block title="ðŸ”„ Scraping &amp; Synchronization" name="etimad_scraping_settings">
                        <setting id="etimad_auto_sync_setting" help="Automatically fetch new tenders from Etimad platform">
                            <field name="etimad_auto_sync"/>
                            <div class="content-group" invisible="not etimad_auto_sync">
                                <div class="row mt16">
                                    <label for="etimad_sync_interval" class="col-lg-3 o_light_label" string="Sync Interval (hours)"/>
                                    <field name="etimad_sync_interval" class="oe_inline"/>
                                </div>
                                <div class="row mt8">
                                    <label for="etimad_fetch_page_size" class="col-lg-3 o_light_label" string="Tenders per Page"/>
                                    <field name="etimad_fetch_page_size" class="oe_inline"/>
                                    <span class="ml-2 text-muted">(max: 50)</span>
                                </div>
                                <div class="row mt8">
                                    <label for="etimad_fetch_pages" class="col-lg-3 o_light_label" string="Pages per Sync"/>
                                    <field name="etimad_fetch_pages" class="oe_inline"/>
                                    <span class="ml-2 text-muted">(1 page = up to 50 tenders)</span>
                                </div>
                                <div class="row mt8">
                                    <label for="etimad_max_retries" class="col-lg-3 o_light_label" string="Max Retries"/>
                                    <field name="etimad_max_retries" class="oe_inline"/>
                                </div>
                            </div>
                        </setting>
                        
                        <setting id="etimad_test_connection">
                            <button name="action_test_scraping" 
                                    string="ðŸ§ª Test Connection" 
                                    type="object" 
                                    class="btn-secondary"/>
                            <button name="action_manual_sync" 
                                    string="ðŸ”„ Manual Sync Now" 
                                    type="object" 
                                    class="btn-primary ml-2"/>
                        </setting>
                    </block>
                    
                    <!-- Smart Matching Settings -->
                    <block title="ðŸŽ¯ Smart Matching Configuration" name="etimad_matching_settings">
                        <setting id="etimad_matching_enable" help="Calculate matching scores based on your company profile">
                            <field name="etimad_enable_matching"/>
                            <div class="content-group" invisible="not etimad_enable_matching">
                                <div class="row mt16">
                                    <label for="etimad_preferred_categories" class="col-lg-3 o_light_label" string="Primary Business"/>
                                    <field name="etimad_preferred_categories" 
                                           placeholder="supply, maintenance, services"
                                           class="o_field_char"/>
                                    <div class="text-muted ml-2">
                                        Options: supply, services, construction, maintenance, consulting
                                    </div>
                                </div>
                                <div class="row mt16">
                                    <label for="etimad_preferred_agencies" class="col-lg-3 o_light_label" string="Preferred Agencies"/>
                                    <field name="etimad_preferred_agencies" 
                                           placeholder="Ministry of Health, General Authority for Transport, Saudi Aramco"
                                           class="o_field_char"/>
                                </div>
                                <div class="row mt8">
                                    <label for="etimad_preferred_activities" class="col-lg-3 o_light_label" string="Preferred Activities"/>
                                    <field name="etimad_preferred_activities" 
                                           placeholder="Construction Works, IT Services, Maintenance Services"
                                           class="o_field_char"/>
                                </div>
                            </div>
                        </setting>
                        
                        <setting id="etimad_value_range" string="Target Value Range" help="Your typical tender value range (in SAR)">
                            <div class="row">
                                <label for="etimad_min_value_target" class="col-lg-3 o_light_label" string="Minimum (SAR)"/>
                                <field name="etimad_min_value_target" class="oe_inline"/>
                            </div>
                            <div class="row mt8">
                                <label for="etimad_max_value_target" class="col-lg-3 o_light_label" string="Maximum (SAR)"/>
                                <field name="etimad_max_value_target" class="oe_inline"/>
                            </div>
                        </setting>
                        
                        <setting id="etimad_preparation_time" help="Minimum days needed to prepare tender submissions">
                            <label for="etimad_min_preparation_days" string="Min Preparation Days"/>
                            <field name="etimad_min_preparation_days" class="oe_inline"/>
                        </setting>
                        
                        <setting id="etimad_recalc_scores">
                            <button name="action_recalculate_match_scores" 
                                    string="â™»ï¸ Recalculate All Match Scores" 
                                    type="object" 
                                    class="btn-secondary"/>
                        </setting>
                    </block>
                    
                    <!-- Auto Opportunity Creation -->
                    <block title="ðŸ¤– Auto Opportunity Creation" name="etimad_opportunity_settings">
                        <setting id="etimad_auto_opportunity" title="Automatically create CRM opportunities for new tenders" help="Enable to create opportunities when tenders match criteria">
                            <field name="etimad_auto_create_opportunity"/>
                            <div class="content-group" invisible="not etimad_auto_create_opportunity">
                                <div class="row mt16">
                                    <label for="etimad_min_tender_value" class="col-lg-3 o_light_label" string="Min Value (SAR)"/>
                                    <field name="etimad_min_tender_value" class="oe_inline"/>
                                </div>
                                <div class="row mt8">
                                    <label for="etimad_min_match_score" class="col-lg-3 o_light_label" string="Min Match Score"/>
                                    <field name="etimad_min_match_score" class="oe_inline"/>
                                    <span class="ml-2">%</span>
                                </div>
                                <div class="row mt8">
                                    <label for="etimad_auto_assign_salesperson" class="col-lg-3 o_light_label"/>
                                    <field name="etimad_auto_assign_salesperson"/>
                                    <span class="ml-2">Auto Assign Salesperson</span>
                                </div>
                            </div>
                        </setting>
                    </block>
                    
                    <!-- Auto Fetch Details -->
                    <block title="ðŸ“¥ Auto Fetch Details" name="etimad_fetch_details_settings">
                        <setting id="etimad_auto_fetch" help="Automatically fetch detailed information for high-match tenders">
                            <field name="etimad_auto_fetch_details"/>
                            <div class="content-group" invisible="not etimad_auto_fetch_details">
                                <div class="row mt16">
                                    <label for="etimad_fetch_details_threshold" class="col-lg-3 o_light_label" string="Fetch if Match Score â‰¥"/>
                                    <field name="etimad_fetch_details_threshold" class="oe_inline"/>
                                    <span class="ml-2">%</span>
                                </div>
                            </div>
                        </setting>
                    </block>
                    
                    <!-- Notification Settings -->
                    <block title="ðŸ”” Notification Settings" name="etimad_notification_settings">
                        <setting id="etimad_notifications" help="Configure when and who receives tender notifications">
                            <field name="etimad_notify_new_tenders"/>
                            <label for="etimad_notify_new_tenders" string="Notify on New Tenders"/>
                        </setting>
                        <setting id="etimad_notify_high_match">
                            <field name="etimad_notify_high_match"/>
                            <label for="etimad_notify_high_match" string="Notify High Match Tenders (â‰¥70%)"/>
                        </setting>
                        <setting id="etimad_notify_hot">
                            <field name="etimad_notify_hot_tenders"/>
                            <label for="etimad_notify_hot_tenders" string="Notify Hot Tenders (High Value + Urgent)"/>
                        </setting>
                        <setting id="etimad_notify_urgent">
                            <field name="etimad_notify_urgent_deadlines"/>
                            <label for="etimad_notify_urgent_deadlines" string="Notify Urgent Deadlines (â‰¤3 days)"/>
                        </setting>
                        <setting id="etimad_notification_users" string="Notification Recipients" help="Users who will receive tender notifications">
                            <field name="etimad_notification_user_ids" widget="many2many_tags"/>
                        </setting>
                    </block>
                    
                    <!-- Archive Settings -->
                    <block title="ðŸ“¦ Archive Settings" name="etimad_archive_settings">
                        <setting id="etimad_archive" help="Automatically archive old closed tenders to keep your data clean">
                            <field name="etimad_auto_archive"/>
                            <div class="content-group" invisible="not etimad_auto_archive">
                                <div class="row mt16">
                                    <label for="etimad_archive_days" class="col-lg-3 o_light_label" string="Archive after"/>
                                    <field name="etimad_archive_days" class="oe_inline"/>
                                    <span class="ml-2">days after deadline</span>
                                </div>
                                <div class="row mt8">
                                    <label for="etimad_archive_lost_only" class="col-lg-3 o_light_label"/>
                                    <field name="etimad_archive_lost_only"/>
                                    <span class="ml-2">Archive Lost/Cancelled Only</span>
                                </div>
                            </div>
                        </setting>
                    </block>
                    
                </app>
            </xpath>
        </field>
    </record>
</odoo>