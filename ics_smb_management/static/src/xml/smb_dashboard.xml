<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">
    <t t-name="ics_smb_management.SmbDashboard">
        <div class="ics_smb_dashboard">
            <t t-if="state.isLoading">
                <div class="d-flex justify-content-center align-items-center" style="min-height: 400px;">
                    <div class="text-center">
                        <i class="fa fa-spinner fa-spin fa-3x text-primary mb-3"/>
                        <h4>Loading SMB Dashboard...</h4>
                    </div>
                </div>
            </t>
            <t t-else="">
                <div class="dashboard-header mb-4">
                    <h2 class="mb-1">SMB Dashboard</h2>
                    <p class="text-muted mb-0">Credit, orders, collection, delivery projects | لوحة SMB</p>
                </div>

                <div class="row mb-4">
                    <div class="col-xl-3 col-md-6 mb-4">
                        <div class="card border-left-warning shadow h-100 py-2 cursor-pointer" t-on-click="() => this.openPendingCredit()">
                            <div class="card-body">
                                <div class="row no-gutters align-items-center">
                                    <div class="col mr-2">
                                        <div class="text-xs font-weight-bold text-warning text-uppercase mb-1">Pending Credit</div>
                                        <div class="h5 mb-0 font-weight-bold text-gray-800"><t t-esc="state.stats.pending_credit"/></div>
                                        <div class="text-xs text-muted">في انتظار الاعتماد</div>
                                    </div>
                                    <div class="col-auto">
                                        <i class="fa fa-credit-card fa-2x text-gray-300"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-3 col-md-6 mb-4">
                        <div class="card border-left-success shadow h-100 py-2 cursor-pointer" t-on-click="() => this.openQuotations()">
                            <div class="card-body">
                                <div class="row no-gutters align-items-center">
                                    <div class="col mr-2">
                                        <div class="text-xs font-weight-bold text-success text-uppercase mb-1">Quotations</div>
                                        <div class="h5 mb-0 font-weight-bold text-gray-800"><t t-esc="state.stats.total_quotations"/></div>
                                        <div class="text-xs text-muted">عروض الأسعار</div>
                                    </div>
                                    <div class="col-auto">
                                        <i class="fa fa-file-text-o fa-2x text-gray-300"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-3 col-md-6 mb-4">
                        <div class="card border-left-primary shadow h-100 py-2 cursor-pointer" t-on-click="() => this.openConfirmedOrders()">
                            <div class="card-body">
                                <div class="row no-gutters align-items-center">
                                    <div class="col mr-2">
                                        <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">Confirmed Orders</div>
                                        <div class="h5 mb-0 font-weight-bold text-gray-800"><t t-esc="state.stats.confirmed_orders"/></div>
                                        <div class="text-xs text-muted">الطلبات المؤكدة</div>
                                    </div>
                                    <div class="col-auto">
                                        <i class="fa fa-check-circle fa-2x text-gray-300"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-3 col-md-6 mb-4">
                        <div class="card border-left-danger shadow h-100 py-2 cursor-pointer" t-on-click="() => this.openOverdueInvoices()">
                            <div class="card-body">
                                <div class="row no-gutters align-items-center">
                                    <div class="col mr-2">
                                        <div class="text-xs font-weight-bold text-danger text-uppercase mb-1">Overdue Invoices</div>
                                        <div class="h5 mb-0 font-weight-bold text-gray-800"><t t-esc="state.stats.overdue_invoices"/></div>
                                        <div class="text-xs text-muted">فواتير متأخرة</div>
                                    </div>
                                    <div class="col-auto">
                                        <i class="fa fa-exclamation-triangle fa-2x text-gray-300"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row mb-4">
                    <div class="col-xl-4 col-md-6 mb-4">
                        <div class="card border-left-info shadow h-100 py-2 cursor-pointer" t-on-click="() => this.openDeliveryProjects()">
                            <div class="card-body">
                                <div class="row no-gutters align-items-center">
                                    <div class="col mr-2">
                                        <div class="text-xs font-weight-bold text-info text-uppercase mb-1">Delivery Projects</div>
                                        <div class="h5 mb-0 font-weight-bold text-gray-800"><t t-esc="state.stats.delivery_projects"/></div>
                                        <div class="text-xs text-muted">مشاريع التسليم</div>
                                    </div>
                                    <div class="col-auto">
                                        <i class="fa fa-tasks fa-2x text-gray-300"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-4 col-md-6 mb-4">
                        <div class="card border-left-success shadow h-100 py-2 cursor-pointer" t-on-click="() => this.openCreditApproved()">
                            <div class="card-body">
                                <div class="text-xs font-weight-bold text-success text-uppercase mb-1">Credit Approved</div>
                                <div class="h5 mb-0 font-weight-bold text-gray-800"><t t-esc="state.stats.credit_approved"/></div>
                                <div class="text-xs text-muted">معتمد ائتمان</div>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-4 col-md-6 mb-4">
                        <div class="card border-left-danger shadow h-100 py-2 cursor-pointer" t-on-click="() => this.openCreditRejected()">
                            <div class="card-body">
                                <div class="text-xs font-weight-bold text-danger text-uppercase mb-1">Credit Rejected</div>
                                <div class="h5 mb-0 font-weight-bold text-gray-800"><t t-esc="state.stats.credit_rejected"/></div>
                                <div class="text-xs text-muted">مرفوض ائتمان</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row mb-4">
                    <div class="col-xl-6 col-lg-6 mb-4">
                        <div class="card shadow h-100">
                            <div class="card-header py-3">
                                <h6 class="m-0 font-weight-bold text-primary"><i class="fa fa-pie-chart"/> Credit State</h6>
                                <small class="text-muted">حالة الائتمان</small>
                            </div>
                            <div class="card-body">
                                <div class="chart-container" style="height: 250px;">
                                    <canvas t-ref="creditChart"/>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-6 col-lg-6 mb-4">
                        <div class="card shadow h-100">
                            <div class="card-header py-3">
                                <h6 class="m-0 font-weight-bold text-primary"><i class="fa fa-line-chart"/> Orders (6 months)</h6>
                                <small class="text-muted">الطلبات المؤكدة (6 أشهر)</small>
                            </div>
                            <div class="card-body">
                                <div class="chart-container" style="height: 250px;">
                                    <canvas t-ref="monthlyTrendChart"/>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </t>
        </div>
    </t>
</templates>
